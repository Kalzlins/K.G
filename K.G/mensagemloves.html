<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Mensagem</title>
  <style>
    body {
      background: linear-gradient(to right, #461647, #961313);
      color: white;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
    }

    .container {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 40px;
      max-width: 800px;
      text-align: center;
      box-shadow: 0 8px 16px rgba(0,0,0,0.3);
      font-size: 1.2em;
    }

    .controls {
      margin-top: 30px;
    }

    .controls button {
      background-color: #ff4d6d;
      color: white;
      border: none;
      padding: 12px 25px;
      font-size: 16px;
      margin: 0 10px;
      cursor: pointer;
      border-radius: 5px;
      transition: background 0.3s;
    }

    .controls button:hover {
      background-color: #e63e5c;
    }

    .hearts {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      overflow: hidden;
      z-index: -1;
    }

    .heart {
      position: absolute;
      color: red;
      animation: float 5s linear infinite;
      font-size: 24px;
    }

    @keyframes float {
      0% { transform: translateY(100vh) scale(1); opacity: 1; }
      100% { transform: translateY(-10vh) scale(1.5); opacity: 0; }
    }

    .final-message {
      font-size: 1.5em;
      margin-top: 30px;
      color: #ff4d6d;
      font-weight: bold;
    }

    form input {
      width: 90%;
      padding: 10px;
      border-radius: 5px;
      border: none;
      margin-top: 10px;
      font-size: 16px;
    }

    form button {
      margin-top: 15px;
      background: #ff4d6d;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }

    #form-feedback {
      margin-top: 15px;
      font-weight: bold;
      color: rgb(236, 217, 229);
    }
  </style>
</head>
<body>
  <audio id="bg-music" loop>
    <source src="minha-loves.mp3" type="audio/mp3">
    Seu navegador n√£o suporta √°udio.
  </audio>

  <div class="hearts" id="hearts"></div>

  <div class="container">
    <div id="text" class="text-block"></div>
    <div class="controls">
      <button id="prevBtn" onclick="prevText()">Anterior</button>
      <button id="nextBtn" onclick="nextText()">Avan√ßar</button>
    </div>
    <div class="final-message" id="finalMessage"></div>
  </div>

  <!-- Bot√£o de m√∫sica -->
  <button id="toggleMusicBtn" onclick="toggleMusic()" style="margin-top: 20px; padding: 10px 20px; font-size: 16px; background: #e99090; color: #961313; border: none; border-radius: 5px; cursor: pointer;">üéµ Tocar m√∫sica</button>

  <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
  <script>
    emailjs.init("L1uFfGm1jrdlX8Q7_");

    const texts = [
      "Bom dia, minha loves! Como de costume‚Ä¶ Mas hoje com o cora√ß√£o um pouco mais exposto.\n\nFiquei distante nesses √∫ltimos dias e mesmo assim sei que estive a√≠, nos seus pensamentos, da mesma forma que voc√™ n√£o saiu dos meus. Eu n√£o sou de falar muito sobre o que sinto. A verdade √© que luto pra entender o que sinto, mas com voc√™‚Ä¶ tudo tem sido diferente. Confuso √†s vezes, mas real. Muito real.",
      "Eu hesitei por dias.\n\nHesitei porque n√£o queria parecer invasivo, ou criar um peso onde s√≥ tem leveza. Mas tem algo dentro de mim que precisa ser dito ou talvez perguntado...",
      "<form id='love-form'>\n<label for='resposta'>Voc√™ est√° namorando? Ou at√© pouco tempo, ainda estava?</label><br>\n<input type='text' id='resposta' name='resposta' required><br>\n<button type='submit'>Enviar resposta</button>\n</form>\n<p id='form-feedback'></p>",
      "D√≥i perguntar isso, n√£o porque n√£o consigo lidar com a resposta, mas porque tudo que vivemos at√© aqui foi intenso demais pra ser apenas um jogo, s√≥ distra√ß√£o. Eu s√≥ desejo que nada disso tenha sido mentira. Nem pra mim. Nem pra voc√™...",
      "Eu gosto de estar contigo, de verdade. Gosto de te ouvir, de dividir sil√™ncios, de rir das besteiras que s√≥ a gente entende. A gente se encontrou e aos poucos foi se tornando algo. Algo que talvez a gente n√£o saiba nomear ainda, mas que cresce e s√≥ vem crescendo. Como no Pequeno Pr√≠ncipe, quando a cativamos algu√©m, essa pessoa se torna √∫nica no mundo para n√≥s e voc√™ se tornou isso, √∫nica para mim.",
      "Eu n√£o sei o que somos, sei que sentimos algo e o que sentimos √© mais do que carinho, √© um afeto com desejo, cuidado com intensidade, um amor gigante.\n\nA √∫nica coisa que talvez nos atrapalha... √â a dist√¢ncia, mas quer saber? Ela n√£o me assusta. Me preocupa, sim, um pouco. Mas n√£o me impede, se voc√™ quiser isso tanto da forma que eu sinto que voc√™ quer, ent√£o nada vai nos parar.\n\nO que importa √© que eu estou aqui agora."
    ];

    let index = 0;
    const textElement = document.getElementById("text");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const finalMessageElement = document.getElementById("finalMessage");

    function updateText() {
      textElement.innerHTML = texts[index];
      prevBtn.style.display = index === 0 ? "none" : "inline-block";
      nextBtn.style.display = index === texts.length - 1 ? "none" : "inline-block";
      
      if (index === texts.length - 1) {
        finalMessageElement.innerText = "Eu te amo! üíó";
      } else {
        finalMessageElement.innerText = "";
      }

      if (index === 2) {
        nextBtn.style.display = "none";
        setTimeout(() => {
          document.getElementById("love-form").addEventListener("submit", function(e) {
            e.preventDefault();
            document.getElementById("form-feedback").innerText = "Sua resposta foi enviada";
            
            const resposta = document.getElementById("resposta").value;

            // Envio do e-mail via EmailJS
            emailjs.sendForm('service_5pl700x', 'template_a83n1uk', this)
              .then(function(response) {
                console.log('Sucesso:', response);
                setTimeout(() => {
                  index++;
                  updateText();
                }, 1500);
              }, function(error) {
                console.log('Erro:', error);
                document.getElementById("form-feedback").innerText = "Houve um erro ao enviar o e-mail. Tente novamente.";
              });
          });
        }, 100);
      }
    }

    function prevText() {
      if (index > 0) {
        index--;
        updateText();
      }
    }

    function nextText() {
      if (index < texts.length - 1) {
        index++;
        updateText();
      }
    }

    function toggleMusic() {
      const music = document.getElementById("bg-music");
      const btn = document.getElementById("toggleMusicBtn");

      if (music.paused) {
        music.play().then(() => {
          btn.innerText = "‚è∏Ô∏è Pausar m√∫sica";
        }).catch((err) => {
          console.error("Erro ao tentar tocar a m√∫sica:", err);
        });
      } else {
        music.pause();
        btn.innerText = "üéµ Tocar m√∫sica";
      }
    }

    function createHeart() {
      const heart = document.createElement("div");
      heart.className = "heart";
      heart.innerText = "‚ù§Ô∏è";
      heart.style.left = Math.random() * 100 + "vw";
      heart.style.animationDuration = (3 + Math.random() * 2) + "s";
      document.getElementById("hearts").appendChild(heart);
      setTimeout(() => heart.remove(), 5000);
    }

    setInterval(createHeart, 300);
    updateText();
  </script>
</body>
</html>
